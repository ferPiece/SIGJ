<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="starter">

<body>
	<div class="row" th:fragment="contenido">
		<div class="col-xs-12">
			<div class="box box-solid box-primary">
				<div class="box-header">
					<h3>Expedientes en Movimiento</h3>
				</div>
				<div class="box-body" style="width: 99%; padding-left: 15px;">
					<div class="col-sm-12" style="background-color:white; border-top-color:#3c8dbc;border-bottom-color:#3c8dbc;border-bottom-style:solid;border-top-style:solid;"
					 th:each="ex : ${expediente}">
					
						<div class="col-sm-9">
						<div class="box-header with-border">
							<h3 class="box-title" th:text=" #{expediente.inicio.nroExpediente.lbl}+' '+${ex.expediente.nroExpediente}"></h3>
						</div>
						<!-- /.box-header -->
						<div class="box-body">
							<input type="hidden" id="id-expediente" th:value="${ex.expediente.id}" > <!-- th:value="${session.expediente.id}" es lo que se va a usar -->
							<div class="col-sm-6">
								<!-- Apartir de aca vamos a poner $ para los datos que vamos a recibir mientras tanto usamos # para datos en duro -->
								<h4 th:text="#{expediente.folio.lbl}+' '+ ${ex.expediente.folio}"></h4>
								 
							</div>
							<div class="col-sm-6">
								<h4 th:text="#{expediente.anho.lbl}+' '+ ${ex.expediente.anho}"></h4>
							</div>
							<div class="col-sm-6">
								<h4 th:text="#{expediente.juez.lbl}+' '+ ${ex.expediente.despachoActual.juez}"></h4>
							</div>
							<div class="col-sm-6">
								<h4 th:text="#{expediente.estadoExterno.lbl}+' '+ ${ex.expediente.estado.descripcion}"></h4>
							</div>
							<th:block th:if="${expedienteActuacionBean} != null" th:each="exb : ${expedienteActuacionBean}">
								<th:block th:if="${exb.expediente.id} == ${ex.expediente.id}">
									<div class="col-sm-6">
										<h4 th:text="#{expediente.tipoActuacion.fechaPresentacion.lbl}+' '+ ${exb.actuacion.fechaPresentacion}"></h4>
									</div>
									<div class="col-sm-6">
										<h4 th:text="#{expediente.tipoActuacion.fechaVencimiento.lbl}+' '+ ${exb.actuacion.fechaVencimiento}"></h4>
									</div>
								</th:block>
							</th:block>
							<div class="col-sm-6" style="float:right;">
							<button class="btn btn-success" 
							th:onclick="'agregar_actuacion(\'' + ${ex.expediente.id} + '\');'">
								<i class="glyphicon glyphicon-plus"></i>Agregar Actuación
							</button>
							</div>
							<div class="col-sm-6" style="float:right;">
							<a th:href="@{/expediente/hojar-expediente/{id}(id=${ex.expediente.id})}"><button class="btn btn-success" ><!--th:onclick="'ver_expediente(\'' + ${ex.expediente.id} + '\');'"  -->
								<i class="glyphicon glyphicon-plus"></i>Ver Expediente Digital
							</button></a>
							
							</div>
						</div>
						<!-- /.box-body -->
					</div>
					<!-- /.box -->
					<div class="col-sm-3">
						<th:block th:if="${expedienteActuacionBean} != null" th:each="exb : ${expedienteActuacionBean}">
							<th:block th:if="${exb.expediente.id} == ${ex.expediente.id} AND ${exb.diaVencimiento} <= 3">				
								<div class="alert alert-warning">
									  <strong><i class="fa fa-exclamation-triangle" style="padding-right:10px;" aria-hidden="true"></i>Atención: </strong>
									  <span> La actuación del expediente esta por vencer, vencera en los  <span th:text="#{3}"></span> proximos días</span>
								</div>
							</th:block>
						</th:block>
					</div>
				</div>
				</div>
				<!-- /.box-body -->
			</div>
			<!-- /.box -->
		</div>
	</div>
</body>

</html>